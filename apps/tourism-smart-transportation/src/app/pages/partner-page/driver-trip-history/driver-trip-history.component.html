<tourism-smart-transportation-loading-progress
  *ngIf="loading"
></tourism-smart-transportation-loading-progress>
<div class="driver-history">
  <div class="grid container" *ngIf="driverHistoryTrip.driver !== null">
    <div class="col-3 container-driver">
      <div class="container-name">
        <p-divider align="center" type="dashed">
          <span class="p-tag">
            <div class="driver-history-title">Tài xế</div></span
          >
        </p-divider>

        <div class="driver-avatar">
          <img
            [src]="
              driverHistoryTrip.driver?.photoUrl === '' ||
              driverHistoryTrip.driver?.photoUrl === null
                ? '../assets/image/imagePreview.png'
                : 'https://se32.blob.core.windows.net/driver/' +
                  driverHistoryTrip.driver?.photoUrl
            "
            alt=""
          />
        </div>
        <p-rating
          [(ngModel)]="driverHistoryTrip.driver.feedbackRating"
          [readonly]="true"
          [stars]="5"
          [cancel]="false"
        ></p-rating>
        <div class="driver-body">
          <div class="driver-body-content">
            <p-divider align="center" type="dashed">
              <span class="p-tag">Thông tin tài xế</span>
            </p-divider>
            <div class="driver-subtitle">Họ & Tên</div>
            <div class="driver-content">
              {{
                driverHistoryTrip.driver?.lastName +
                  ' ' +
                  driverHistoryTrip.driver?.firstName
              }}
            </div>
          </div>
          <p-divider align="center" type="dashed"></p-divider>
          <div class="driver-body-content">
            <div class="driver-subtitle">Ngày sinh</div>
            <div class="driver-content">
              {{ driverHistoryTrip.driver?.dateOfBirth | date: 'dd/MM/YYYY' }}
            </div>
          </div>
          <p-divider align="center" type="dashed"></p-divider>

          <div class="driver-body-content">
            <div class="driver-subtitle">Giới tính</div>
            <div class="driver-content">
              {{ driverHistoryTrip.driver?.gender ? 'Nam' : 'Nữ' }}
            </div>
          </div>
          <p-divider align="center" type="dashed"></p-divider>

          <div class="driver-body-content">
            <div class="driver-subtitle">Số điện thoại</div>
            <div class="driver-content">
              {{ driverHistoryTrip.driver?.phone }}
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-9 container-history">
      <div class="driver-history-title">Lịch sử chuyến đi</div>
      <p-scrollPanel [style]="{ width: '100%', height: '86vh' }">
        <div class="card" *ngFor="let history of driverHistoryTrip.history">
          <div class="serivce-name">
            <b>Dịch vụ:</b> {{ history?.serviceTypeName }}
          </div>
          <div class="driver-history-card">
            <div>
              <div class="history-content">
                <b>Tên xe:</b> {{ history?.vehicleName }}
              </div>
              <div class="spacing"></div>
              <div class="history-content">
                <b>Biển số xe:</b> {{ history.licensePlates }}
              </div>
            </div>
            <div>
              <div class="history-content" *ngIf="history?.routeName !== null">
                <b>Tên tuyến:</b> {{ history?.routeName }}
              </div>
              <div class="spacing"></div>
              <div class="history-content">
                <b>Khoảng cách: </b>{{ history?.distance / 1000 }} Km
              </div>
            </div>
            <div>
              <b>Đánh giá:</b>
              <p-rating
                [(ngModel)]="history.feedbackDriverRating"
                [readonly]="true"
                [stars]="5"
                [cancel]="false"
              ></p-rating>
            </div>
          </div>
        </div>
      </p-scrollPanel>
    </div>
  </div>

  <div class="container" *ngIf="driverHistoryTrip.driver === null">
    Hiện tại tài xế chưa có chuyến nào!
  </div>
</div>
